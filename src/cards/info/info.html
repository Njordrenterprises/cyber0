<!-- src/cards/info/info.html -->
<div class="card info-card"
     x-data="{ 
       message: '',
       inputValue: '',
       cardIndex: $el.closest('.card-wrapper').dataset.index,
       cardData: null,
       async init() {
         // Wait for card data to be initialized
         while (!globalThis.cardData?.info?.handleKvUpdate) {
           console.log('Waiting for card data...');
           await new Promise(resolve => setTimeout(resolve, 100));
         }
         console.log('Card data initialized:', globalThis.cardData.info);
         this.cardData = globalThis.cardData.info;
         await this.loadMessage();
       },
       async submitMessage() {
         console.log('Submitting message:', this.inputValue);
         console.log('Card data:', this.cardData);
         if (!this.cardData?.handleKvUpdate) {
           console.error('Card methods not initialized:', this.cardData);
           return;
         }
         await this.cardData.handleKvUpdate(parseInt(this.cardIndex), this.inputValue);
         this.message = this.inputValue;
         this.inputValue = '';
       },
       async loadMessage() {
         console.log('Loading message for index:', this.cardIndex);
         console.log('Card data:', this.cardData);
         if (!this.cardData?.loadCardMessage) {
           console.error('Card methods not initialized:', this.cardData);
           return;
         }
         this.message = await this.cardData.loadCardMessage(parseInt(this.cardIndex));
       }
     }"
     x-init="await init()">
  <div class="info-content">
    <h1>Info Card #<span x-text="parseInt(cardIndex) + 1"></span></h1>
    <form @submit.prevent="submitMessage">
      <input type="text" 
             x-model="inputValue" 
             placeholder="Enter a message">
      <button type="submit" class="submit-btn">Submit</button>
    </form>
    <div class="message-display" x-show="message">
      <p x-text="message"></p>
    </div>
  </div>
</div>